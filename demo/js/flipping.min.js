/**
 * Flipping Cards Carousel 2.1.0
 * https://github.com/mad48/flipping-cards#readme
 *
 * Copyright 2017-2018 Max <max@develexe.com>
 *
 * Released on: January 25, 2018
 * MIT License
*/

var flipping={configuration:{autoFlipMode:!1,autoFlipDelay:1500,pauseMouseOver:!0,cardsShadow:!0,buttonsShadow:!0,transitionDuration:700,rotationMode:"SIMULTANEOUS",sequentialDelay:600,cardWidth:150,cardHeight:180,spacingHorizontal:15,spacingVertical:15,cardsToShow:1,cardsPerRow:1,startFromIndex:1,buttonBackwardHtml:"&#9668;",buttonForwardHtml:"&#9658;"},flippingCards:null,buttons:[],box:null,cardsCount:0,content:[],lastIndex:-1,startIndex:-1,direction:1,browser:null,touchPosition:null,flipDisabled:!1,timeout:0,setConfiguration:function(t){var n=this;n.box.ondragstart=function(){return!1},0==t.autoFlipMode&&(n.configuration.autoFlipMode=!1,n.buttons[0].style.visibility="visible",n.buttons[1].style.visibility="visible",n.setAutoFlip(!1)),1==t.autoFlipMode&&(0==n.configuration.autoFlipMode&&n.setAutoFlip(!0),n.configuration.autoFlipMode=!0,n.buttons[0].style.visibility="hidden",n.buttons[1].style.visibility="hidden"),n.configuration.autoFlipDelay!=t.autoFlipDelay&&n.configuration.autoFlipMode&&(n.setAutoFlip(!1),n.configuration.autoFlipDelay=parseInt(t.autoFlipDelay),n.setAutoFlip(!0)),t.startFromIndex>0&&(t.startFromIndex>n.content.length&&(t.startFromIndex=n.content.length),n.configuration.startFromIndex=t.startFromIndex-1),t.transitionDuration>0&&(n.configuration.transitionDuration=t.transitionDuration),0!=t.pauseMouseOver&&1!=t.pauseMouseOver||(n.configuration.pauseMouseOver=t.pauseMouseOver),1!=n.configuration.pauseMouseOver&&0!=n.configuration.pauseMouseOver||(n.flippingCards.onmouseover=function(){1==n.configuration.autoFlipMode&&1==n.configuration.pauseMouseOver&&n.setAutoFlip(!1)},n.flippingCards.onmouseout=function(){1==n.configuration.autoFlipMode&&1==n.configuration.pauseMouseOver&&n.setAutoFlip(!0)}),t.cardWidth>0&&(n.configuration.cardWidth=parseInt(t.cardWidth)),t.cardHeight>0&&(n.configuration.cardHeight=parseInt(t.cardHeight)),t.spacingVertical>0&&(n.configuration.spacingVertical=parseInt(t.spacingVertical)),t.spacingHorizontal>0&&(n.configuration.spacingHorizontal=parseInt(t.spacingHorizontal)),0==t.cardsShadow&&(n.configuration.cardsShadow=!1),1==t.cardsShadow&&(n.configuration.cardsShadow=!0),t.sequentialDelay>0&&(n.configuration.sequentialDelay=t.sequentialDelay),!t.rotationMode||"simultaneous"!=t.rotationMode.toLowerCase()&&"sequential"!=t.rotationMode.toLowerCase()||("simultaneous"==t.rotationMode.toLowerCase()?(n.configuration.rotationMode="simultaneous",n.configuration.sequentialDelay=0):n.configuration.rotationMode="sequential"),t.cardsToShow>=0&&(n.configuration.cardsToShow=t.cardsToShow),t.cardsPerRow>0&&(t.cardsPerRow>t.cardsToShow&&(t.cardsPerRow=t.cardsToShow),n.configuration.cardsPerRow=t.cardsPerRow),n.box.style.width=n.configuration.cardWidth*n.configuration.cardsPerRow+2*n.configuration.spacingHorizontal*n.configuration.cardsPerRow+"px",window.onblur=function(){n.configuration.autoFlipMode&&n.setAutoFlip(!1)},window.onfocus=function(){n.configuration.autoFlipMode&&n.setAutoFlip(!0)},0==t.cardsToShow&&(n.buttons[0].style.display="none",n.buttons[1].style.display="none"),0==t.buttonsShadow&&(n.configuration.buttonsShadow=!1,n.buttons[0].classList.remove("shadow-on"),n.buttons[0].classList.add("shadow-off"),n.buttons[1].classList.remove("shadow-on"),n.buttons[1].classList.add("shadow-off")),1!=t.buttonsShadow&&void 0!=t.buttonsShadow||(n.configuration.buttonsShadow=!0,n.buttons[0].classList.remove("shadow-off"),n.buttons[0].classList.add("shadow-on"),n.buttons[1].classList.remove("shadow-off"),n.buttons[1].classList.add("shadow-on")),""!==n.buttons[0].innerHTML.trim()&&(n.configuration.buttonBackwardHtml=n.buttons[0].innerHTML),void 0!=t.buttonBackwardHtml&&(n.configuration.buttonBackwardHtml=t.buttonBackwardHtml),n.buttons[0].innerHTML=n.configuration.buttonBackwardHtml,""!==n.buttons[1].innerHTML.trim()&&(n.configuration.buttonForwardHtml=n.buttons[1].innerHTML),void 0!=t.buttonForwardHtml&&(n.configuration.buttonForwardHtml=t.buttonForwardHtml),n.buttons[1].innerHTML=n.configuration.buttonForwardHtml,n.setButtonsDisabledState(!1)},setNextContentIndex:function(t,n){var o=this,i=o.content.length,a=0;return null==n&&(n=1),1==t?((a=o.lastIndex+n)>i-1&&(a=o.lastIndex+n-i),o.lastIndex=a,a):-1==t?((a=o.lastIndex-n)<0&&(a=o.lastIndex-n+i),o.lastIndex=a,a):void 0},getCardFrontBackHTML:function(){var t=this;return"<div style='width: "+t.configuration.cardWidth+"px; height: "+t.configuration.cardHeight+"px; transitionDuration:  "+t.configuration.transitionDuration+"ms' class='front  "+(t.configuration.cardsShadow?"shadow-on":"shadow-off")+"'></div><div  style='width: "+t.configuration.cardWidth+"px; height: "+t.configuration.cardHeight+"px' transitionDuration:  "+t.configuration.transitionDuration+"ms' class='back back"+t.direction+" "+(t.configuration.cardsShadow?"shadow-on":"shadow-off")+"'></div>"},setCardFrontContent:function(t,n){var o=this;o.box.children[t].getElementsByClassName("front")[0].innerHTML=o.content[o.setNextContentIndex(n)],0==t&&(o.startIndex=o.lastIndex-1)},setCardBackContent:function(t,n){var o=this,i=o.box.children[t].getElementsByClassName("back")[0];i.classList.remove("back1"),i.classList.remove("back-1"),i.classList.add("back"+n),i.innerHTML=o.content[o.setNextContentIndex(1)]},setCardStacksHTML:function(){var t=this;t.box.innerHTML="";for(var n=0;n<t.configuration.cardsToShow;n++)t.box.innerHTML=t.box.innerHTML+'<div class="card-stack">'+t.getCardFrontBackHTML()+"</div>";[].forEach.call(t.box.children,function(n){n.style.marginLeft=t.configuration.spacingHorizontal+"px",n.style.marginRight=t.configuration.spacingHorizontal+"px",n.style.marginTop=t.configuration.spacingVertical+"px",n.style.marginBottom=t.configuration.spacingVertical+"px"})},getCardsContentArray:function(t){for(var n=[],o=0;o<t.children.length;o++)n[o]=t.children[o].innerHTML.trim();return n},init:function(t,n){var o=this;-1==o.startIndex?o.startIndex=o.configuration.startFromIndex:o.lastIndex=o.startIndex,o.browser=o.getBrowser(),o.flippingCards=document.getElementById(t);var i=o.flippingCards.getElementsByClassName("cards")[0];if(o.buttons[0]=o.flippingCards.getElementsByClassName("btn-backward")[0],o.buttons[1]=o.flippingCards.getElementsByClassName("btn-forward")[0],null==o.box){var a=document.createElement("div");a.classList.add("card-box"),o.box=i.parentNode.insertBefore(a,i.nextSibling)}o.content=o.getCardsContentArray(i),o.setConfiguration(n),o.setCardStacksHTML(),o.cardsCount=o.box.children.length;for(var r=0;r<o.cardsCount;r++)o.setCardFrontContent(r,1);for(r=0;r<o.cardsCount;r++)o.setCardBackContent(r,1);o.flippingCards.style.visibility="visible","ontouchstart"in document.documentElement&&(o.flippingCards.addEventListener("touchstart",function(t){o.touchActionStart(t)},!1),o.flippingCards.addEventListener("touchend",function(t){o.touchActionEnd(t)},!1))},arrowClick:function(t){var n=this;if(n.direction!=t){for(n.direction=t,n.setCardStacksHTML(),-1==t&&n.setNextContentIndex(-1,2*n.cardsCount),i=0;i<n.cardsCount;i++)n.setCardFrontContent(i,1);for(-1==t&&n.setNextContentIndex(-1,2*n.cardsCount),i=0;i<n.cardsCount;i++)n.setCardBackContent(i,t)}n.direction=t,n.flipAllCards(t)},touchActionStart:function(t){this.touchPosition=t.touches[0].pageX},touchActionEnd:function(t){var n=this,o=t.changedTouches,i=n.touchPosition-o[o.length-1].pageX;if(Math.abs(i)<10||1==n.flipDisabled)return!1;i<0?n.arrowClick(-1):n.arrowClick(1)},flipAllCards:function(t){var n=this,o=0;n.setButtonsDisabledState(!0),n.flipDisabled=!0;var i="sequential"==n.configuration.rotationMode?n.configuration.sequentialDelay*n.cardsCount:n.configuration.transitionDuration;for(o=0;o<n.cardsCount;o++)!function(o){setTimeout(function(){n.flipCard(o,t)},n.configuration.sequentialDelay*o)}(o);setTimeout(function(){n.setCardStacksHTML(),n.setNextContentIndex(-1,n.cardsCount);for(var o=0;o<n.cardsCount;o++)n.setCardFrontContent(o,1);for(-1==t&&n.setNextContentIndex(-1,2*n.cardsCount),o=0;o<n.cardsCount;o++)n.setCardBackContent(o,t);n.setButtonsDisabledState(!1),n.flipDisabled=!1},i)},flipCard:function(t,n){var o=this,i=o.box.children[t],a=i.getElementsByClassName("front")[0],r=i.getElementsByClassName("back")[0];a.style.transitionDuration=o.configuration.transitionDuration+"ms",r.style.transitionDuration=o.configuration.transitionDuration+"ms";var e="safari"==o.browser?"webkitTransform":"transform";a.style[e]="rotateY("+-1*n*180+"deg)",r.style[e]="rotateY(0deg)"},setButtonsDisabledState:function(t){var n=this;t?(n.buttons[0].onclick=function(){return!1},n.buttons[1].onclick=function(){return!1}):(n.buttons[0].onclick=function(){n.arrowClick(-1)},n.buttons[1].onclick=function(){n.arrowClick(1)})},setAutoFlip:function(t,n){var o=this;null==n&&(n=1),t?o.timeout=setInterval(function(){o.arrowClick(n)},o.configuration.autoFlipDelay):clearInterval(o.timeout)},getBrowser:function(){return navigator.userAgent.search(/Safari/)>-1?"safari":""}};"object"==typeof module&&(module.exports=flipping);