var flipping={flipping_cards:null,box:null,decks:null,buttons:null,browser:null,direction:1,last_dir:[],card_html:null,cards_count:0,content:[],content_index:[],current_card_number:0,timeout:0,paused:!1,options:{autoFlipMode:!1,autoFlipDelay:1500,displayShadow:!0,transitionDuration:700,pauseMouseOver:!0,rotationMode:"simultaneous",sequentialDelay:600,cardWidth:200,cardHeight:200,spacingVertical:15,spacingHorizontal:15,cardsToShow:3,cardsPerRow:0,startFromIndex:1},init:function(t,o){var n=this;n.browser=n.getBrowser();var s=0;n.flipping_cards=document.getElementById(t),n.box=flipping_cards.getElementsByClassName("card-box")[0],n.flipping_cards.style.visibility="visible",n.buttons=n.flipping_cards.getElementsByTagName("button"),n.decks=n.flipping_cards.getElementsByClassName("card-stack"),n.cards=n.box.children,n.cards_count=n.box.children.length,o.startFromIndex>0&&(o.startFromIndex>n.box.children.length&&(o.startFromIndex=n.box.children.length),n.options.startFromIndex=o.startFromIndex-1);var i=[];for(s=0;s<n.box.children.length;s++)i[s]=n.box.children[s].outerHTML;var e=i.slice(0,n.options.startFromIndex),a=i.slice(n.options.startFromIndex);n.box.innerHTML=a.concat(e).join("");var r;for(r=n.box.children,o.cardsToShow>0&&(o.cardsToShow>n.box.children.length&&(o.cardsToShow=n.box.children.length),n.options.cardsToShow=o.cardsToShow),s=0;s<n.options.cardsToShow;s++){n.content[s]=[],n.content_index[s]=n.options.startFromIndex,n.last_dir[s]=1;for(var l=0;l<Math.floor(n.box.children.length/n.options.cardsToShow);l++)n.content[s][l]=r[l*n.options.cardsToShow+s].innerHTML}for(n.box.innerHTML="",s=0;s<n.options.cardsToShow;s++)n.box.innerHTML=n.box.innerHTML+'<div class="card-stack">'+n.content[s][0]+"</div>";for(n.decks=n.flipping_cards.getElementsByClassName("card-stack"),n.configure(o),s=0;s<n.decks.length;s++)n.decks[s].innerHTML=n.card_html;for(s=0;s<n.decks.length;s++){var d=n.decks[s].getElementsByClassName("front")[0],c=n.decks[s].getElementsByClassName("back")[0];n.content_index[s]=0,d.innerHTML=n.content[s][0],c.innerHTML=n.content[s][1],c.classList.add("back1")}n.buttons[0].onclick=function(){if(-1!=n.direction){var t=n.flipping_cards.getElementsByClassName("back");for(s=0;s<t.length;s++)t[s].style.display="none",t[s].classList.remove("back1"),t[s].classList.add("back-1");setTimeout(function(){for(s=0;s<t.length;s++)t[s].style.display="block";n.sequential(-1)},100)}else n.sequential(-1)},n.buttons[1].onclick=function(){if(1!=n.direction){var t=n.flipping_cards.getElementsByClassName("back");for(s=0;s<t.length;s++)t[s].style.display="none",t[s].classList.remove("back-1"),t[s].classList.add("back1");setTimeout(function(){for(s=0;s<t.length;s++)t[s].style.display="block";n.sequential(1)},100)}else n.sequential(1)}},buttonsoff:function(t){this.buttons[0].disabled=t,this.buttons[1].disabled=t},sequential:function(t){var o=this,n=0;o.buttonsoff(!0);var s="sequential"==o.options.rotationMode?o.options.sequentialDelay*o.decks.length:o.options.transitionDuration;for(setTimeout(function(){o.buttonsoff(!1)},s),o.current_card_number=o.current_card_number+o.options.cardsToShow*t,o.current_card_number<0?o.current_card_number=o.cards_count-o.options.cardsToShow:o.current_card_number>o.cards_count-1&&(o.current_card_number=0),n=0;n<o.decks.length;n++)!function(n){setTimeout(function(){o.flip(n,t)},o.options.sequentialDelay*n)}(n)},autoflip:function(t){var o=this;t?o.timeout=setInterval(function(){o.buttons[1].click()},o.options.autoFlipDelay):clearInterval(o.timeout)},flip:function(t,o){var n=this,s=(n.content_index[t],n.next(n.content_index[t],n.content[t].length,o)),i=n.decks[t],e=i.getElementsByClassName("front")[0],a=i.getElementsByClassName("back")[0];a.innerHTML=n.content[t][s],e.style.transitionDuration=n.options.transitionDuration+"ms",a.style.transitionDuration=n.options.transitionDuration+"ms","safari"==n.browser?(e.style.webkitTransform="rotateY("+-1*o*180+"deg)",a.style.webkitTransform="rotateY(0deg)"):(e.style.transform="rotateY("+-1*o*180+"deg)",a.style.transform="rotateY(0deg)"),a.addEventListener("safari"==n.browser?"webkitTransitionEnd":"transitionend",function(i){if("transform"==i.propertyName||"-webkit-transform"==i.propertyName){var e=n.decks[t];n.card_html="<div style='width: "+n.options.cardWidth+"px; height: "+n.options.cardHeight+"px' class='front "+(1==n.options.displayShadow?"shadowon":"shadowoff")+"' style='transitionDuration:  "+n.options.transitionDuration+"ms'></div><div  style='width: "+n.options.cardWidth+"px; height: "+n.options.cardHeight+"px' class='back back"+o+" "+(1==n.options.displayShadow?"shadowon":"shadowoff")+"' style='transitionDuration:  "+n.options.transitionDuration+"ms'></div>",e.innerHTML=n.card_html,e.getElementsByClassName("front")[0].innerHTML=n.content[t][s]}n.content_index[t]=s,n.last_dir[t]=o,n.direction=o})},next:function(t,o,n){return 1==n?t>=o-1?0:++t:-1==n?(t-=1)<0?o-1:t:void 0},getBrowser:function(){return navigator.userAgent.search(/Safari/)>-1?"safari":""},configure:function(t){var o=this;o.flipping_cards.ondragstart=function(){return!1},0==t.autoFlipMode&&(o.options.autoFlipMode=!1,o.buttons[0].style.visibility="visible",o.buttons[1].style.visibility="visible",o.autoflip(!1)),1==t.autoFlipMode&&(0==o.options.autoFlipMode&&o.autoflip(!0),o.options.autoFlipMode=!0,o.buttons[0].style.visibility="hidden",o.buttons[1].style.visibility="hidden"),o.options.autoFlipDelay!=t.autoFlipDelay&&o.options.autoFlipMode&&(o.autoflip(!1),o.options.autoFlipDelay=parseInt(t.autoFlipDelay),o.autoflip(!0)),0==t.displayShadow&&(o.options.displayShadow=!1,o.buttons[0].classList.remove("shadowon"),o.buttons[0].classList.add("shadowoff"),o.buttons[1].classList.remove("shadowon"),o.buttons[1].classList.add("shadowoff")),1==t.displayShadow&&(o.options.displayShadow=!0,o.buttons[0].classList.remove("shadowoff"),o.buttons[0].classList.add("shadowon"),o.buttons[1].classList.remove("shadowoff"),o.buttons[1].classList.add("shadowon")),t.startFromIndex>0&&(t.startFromIndex>o.box.children.length&&(t.startFromIndex=o.box.children.length),o.options.startFromIndex=t.startFromIndex-1),t.transitionDuration>0&&(o.options.transitionDuration=t.transitionDuration),0!=t.pauseMouseOver&&1!=t.pauseMouseOver||(o.options.pauseMouseOver=t.pauseMouseOver),1!=o.options.pauseMouseOver&&0!=o.options.pauseMouseOver||(o.flipping_cards.onmouseover=function(){1==o.options.autoFlipMode&&1==o.options.pauseMouseOver&&o.autoflip(!1)},o.flipping_cards.onmouseout=function(){1==o.options.autoFlipMode&&1==o.options.pauseMouseOver&&o.autoflip(!0)}),window.onblur=function(){o.options.autoFlipMode&&o.autoflip(!1)},window.onfocus=function(){o.options.autoFlipMode&&o.autoflip(!0)},t.cardWidth>0&&(o.options.cardWidth=parseInt(t.cardWidth)),t.cardHeight>0&&(o.options.cardHeight=parseInt(t.cardHeight)),t.spacingVertical>0&&(o.options.spacingVertical=parseInt(t.spacingVertical)),t.spacingHorizontal>0&&(o.options.spacingHorizontal=parseInt(t.spacingHorizontal)),t.sequentialDelay>0&&(o.options.sequentialDelay=t.sequentialDelay),"simultaneous"!=t.rotationMode&&"sequential"!=t.rotationMode||("simultaneous"==t.rotationMode?(o.options.rotationMode="simultaneous",o.options.sequentialDelay=0):o.options.rotationMode="sequential"),t.cardsPerRow>0&&(t.cardsPerRow>o.decks.length&&(t.cardsPerRow=o.decks.length),o.options.cardsPerRow=t.cardsPerRow,o.options["number-of-rows"]=Math.round(o.decks.length/o.options.cardsPerRow)),o.box.style.width=o.options.cardWidth*o.options.cardsPerRow+2*o.options.spacingHorizontal*o.options.cardsPerRow+"px",[].forEach.call(o.flipping_cards.querySelectorAll(".card-stack"),function(t){t.style.clear="none"});for(var n=o.flipping_cards.querySelectorAll("div.card-stack"),s=0;s<n.length;s++)s%o.options.cardsPerRow==0&&(n[s].style.clear="left");[].forEach.call(o.flipping_cards.querySelectorAll(".card-stack"),function(t){t.style.marginLeft=o.options.spacingHorizontal+"px",t.style.marginRight=o.options.spacingHorizontal+"px",t.style.marginTop=o.options.spacingVertical+"px",t.style.marginBottom=o.options.spacingVertical+"px"}),o.card_html="<div style='width: "+o.options.cardWidth+"px; height: "+o.options.cardHeight+"px' class='front  "+(o.options.displayShadow?"shadowon":"shadowoff")+"' style='transitionDuration:  "+o.options.transitionDuration+"ms'></div><div  style='width: "+o.options.cardWidth+"px; height: "+o.options.cardHeight+"px' class='back  "+(o.options.displayShadow?"shadowon":"shadowoff")+"' style='transitionDuration:  "+o.options.transitionDuration+"ms'></div>"}};"object"==typeof module&&(module.exports=flipping);