/**
 * Flipping Cards Carousel 2.1.0
 * https://github.com/mad48/flipping-cards#readme
 *
 * Copyright 2017-2018 Max <max@develexe.com>
 *
 * Released on: January 17, 2018
 * MIT License
*/

var flipping={options:{autoFlipMode:!1,autoFlipDelay:1500,pauseMouseOver:!0,displayShadow:!0,transitionDuration:700,rotationMode:"simultaneous",sequentialDelay:600,cardWidth:150,cardHeight:180,spacingHorizontal:15,spacingVertical:15,cardsToShow:1,cardsPerRow:1,startFromIndex:1},flipping_cards:null,buttons:null,box:null,cards_count:0,content:[],last_index:-1,start_index:-1,direction:1,browser:null,timeout:0,setConfiguration:function(t){var o=this;o.box.ondragstart=function(){return!1},0==t.autoFlipMode&&(o.options.autoFlipMode=!1,o.buttons[0].style.visibility="visible",o.buttons[1].style.visibility="visible",o.autoFlip(!1)),1==t.autoFlipMode&&(0==o.options.autoFlipMode&&o.autoFlip(!0),o.options.autoFlipMode=!0,o.buttons[0].style.visibility="hidden",o.buttons[1].style.visibility="hidden"),o.options.autoFlipDelay!=t.autoFlipDelay&&o.options.autoFlipMode&&(o.autoFlip(!1),o.options.autoFlipDelay=parseInt(t.autoFlipDelay),o.autoFlip(!0)),0==t.displayShadow&&(o.options.displayShadow=!1,o.buttons[0].classList.remove("shadowon"),o.buttons[0].classList.add("shadowoff"),o.buttons[1].classList.remove("shadowon"),o.buttons[1].classList.add("shadowoff")),1==t.displayShadow&&(o.options.displayShadow=!0,o.buttons[0].classList.remove("shadowoff"),o.buttons[0].classList.add("shadowon"),o.buttons[1].classList.remove("shadowoff"),o.buttons[1].classList.add("shadowon")),t.startFromIndex>0&&(t.startFromIndex>o.content.length&&(t.startFromIndex=o.content.length),o.options.startFromIndex=t.startFromIndex-1),t.transitionDuration>0&&(o.options.transitionDuration=t.transitionDuration),0!=t.pauseMouseOver&&1!=t.pauseMouseOver||(o.options.pauseMouseOver=t.pauseMouseOver),1!=o.options.pauseMouseOver&&0!=o.options.pauseMouseOver||(o.flipping_cards.onmouseover=function(){1==o.options.autoFlipMode&&1==o.options.pauseMouseOver&&o.autoFlip(!1)},o.flipping_cards.onmouseout=function(){1==o.options.autoFlipMode&&1==o.options.pauseMouseOver&&o.autoFlip(!0)}),t.cardWidth>0&&(o.options.cardWidth=parseInt(t.cardWidth)),t.cardHeight>0&&(o.options.cardHeight=parseInt(t.cardHeight)),t.spacingVertical>0&&(o.options.spacingVertical=parseInt(t.spacingVertical)),t.spacingHorizontal>0&&(o.options.spacingHorizontal=parseInt(t.spacingHorizontal)),t.sequentialDelay>0&&(o.options.sequentialDelay=t.sequentialDelay),"simultaneous"!=t.rotationMode&&"sequential"!=t.rotationMode||("simultaneous"==t.rotationMode?(o.options.rotationMode="simultaneous",o.options.sequentialDelay=0):o.options.rotationMode="sequential"),t.cardsToShow>0&&(o.options.cardsToShow=t.cardsToShow),t.cardsPerRow>0&&(t.cardsPerRow>t.cardsToShow&&(t.cardsPerRow=t.cardsToShow),o.options.cardsPerRow=t.cardsPerRow),o.box.style.width=o.options.cardWidth*o.options.cardsPerRow+2*o.options.spacingHorizontal*o.options.cardsPerRow+"px",window.onblur=function(){o.options.autoFlipMode&&o.autoFlip(!1)},window.onfocus=function(){o.options.autoFlipMode&&o.autoFlip(!0)},o.buttons[0].onclick=function(){o.arrowClick(-1)},o.buttons[1].onclick=function(){o.arrowClick(1)}},setNextContentIndex:function(t,o){var n=this,i=n.content.length,s=0;return null==o&&(o=1),1==t?((s=n.last_index+o)>i-1&&(s=n.last_index+o-i),n.last_index=s,s):-1==t?((s=n.last_index-o)<0&&(s=n.last_index-o+i),n.last_index=s,s):void 0},getCardFrontBackHTML:function(){var t=this;return"<div style='width: "+t.options.cardWidth+"px; height: "+t.options.cardHeight+"px; transitionDuration:  "+t.options.transitionDuration+"ms' class='front  "+(t.options.displayShadow?"shadowon":"shadowoff")+"'></div><div  style='width: "+t.options.cardWidth+"px; height: "+t.options.cardHeight+"px' transitionDuration:  "+t.options.transitionDuration+"ms' class='back back"+t.direction+" "+(t.options.displayShadow?"shadowon":"shadowoff")+"'></div>"},setCardFrontContent:function(t,o){var n=this;n.box.children[t].getElementsByClassName("front")[0].innerHTML=n.content[n.setNextContentIndex(o)],0==t&&(n.start_index=n.last_index-1)},setCardBackContent:function(t,o){var n=this,i=n.box.children[t].getElementsByClassName("back")[0];i.classList.remove("back1"),i.classList.remove("back-1"),i.classList.add("back"+o),i.innerHTML=n.content[n.setNextContentIndex(1)]},setCardStacksHTML:function(){var t=this;t.box.innerHTML="";for(var o=0;o<t.options.cardsToShow;o++)t.box.innerHTML=t.box.innerHTML+'<div class="card-stack">'+t.getCardFrontBackHTML()+"</div>";[].forEach.call(t.box.children,function(o){o.style.marginLeft=t.options.spacingHorizontal+"px",o.style.marginRight=t.options.spacingHorizontal+"px",o.style.marginTop=t.options.spacingVertical+"px",o.style.marginBottom=t.options.spacingVertical+"px"})},getCardsContentArray:function(t){for(var o=[],n=0;n<t.children.length;n++)o[n]=t.children[n].innerHTML.trim();return o},init:function(t,o){var n=this;-1==n.start_index?n.start_index=n.options.startFromIndex:n.last_index=n.start_index,n.browser=n.getBrowser(),n.flipping_cards=document.getElementById(t);var i=flipping_cards.getElementsByClassName("cards")[0];if(n.buttons=n.flipping_cards.getElementsByTagName("button"),null==n.box){var s=document.createElement("div");s.classList.add("card-box"),n.box=i.parentNode.insertBefore(s,i.nextSibling)}n.content=n.getCardsContentArray(i),n.setConfiguration(o),n.setCardStacksHTML(),n.cards_count=n.box.children.length;for(var a=0;a<n.cards_count;a++)n.setCardFrontContent(a,1);for(a=0;a<n.cards_count;a++)n.setCardBackContent(a,1);n.flipping_cards.style.visibility="visible"},arrowClick:function(t){var o=this;if(o.direction!=t){for(o.direction=t,o.setCardStacksHTML(),-1==t&&o.setNextContentIndex(-1,2*o.cards_count),i=0;i<o.cards_count;i++)o.setCardFrontContent(i,1);for(-1==t&&o.setNextContentIndex(-1,2*o.cards_count),i=0;i<o.cards_count;i++)o.setCardBackContent(i,t)}o.direction=t,o.flipAllCards(t)},flipAllCards:function(t){var o=this,n=0;o.disableButtons(!0);var i="sequential"==o.options.rotationMode?o.options.sequentialDelay*o.cards_count:o.options.transitionDuration;for(n=0;n<o.cards_count;n++)!function(n){setTimeout(function(){o.flipCard(n,t)},o.options.sequentialDelay*n)}(n);setTimeout(function(){o.setCardStacksHTML(),o.setNextContentIndex(-1,o.cards_count);for(var n=0;n<o.cards_count;n++)o.setCardFrontContent(n,1);for(-1==t&&o.setNextContentIndex(-1,2*o.cards_count),n=0;n<o.cards_count;n++)o.setCardBackContent(n,t);o.disableButtons(!1)},i)},flipCard:function(t,o){var n=this,i=n.box.children[t],s=i.getElementsByClassName("front")[0],a=i.getElementsByClassName("back")[0];s.style.transitionDuration=n.options.transitionDuration+"ms",a.style.transitionDuration=n.options.transitionDuration+"ms","safari"==n.browser?(s.style.webkitTransform="rotateY("+-1*o*180+"deg)",a.style.webkitTransform="rotateY(0deg)"):(s.style.transform="rotateY("+-1*o*180+"deg)",a.style.transform="rotateY(0deg)")},disableButtons:function(t){this.buttons[0].disabled=t,this.buttons[1].disabled=t},autoFlip:function(t){var o=this;t?o.timeout=setInterval(function(){o.arrowClick(1)},o.options.autoFlipDelay):clearInterval(o.timeout)},getBrowser:function(){return navigator.userAgent.search(/Safari/)>-1?"safari":""}};"object"==typeof module&&(module.exports=flipping);